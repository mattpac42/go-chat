# ===============================================================================
# Environment Variables Configuration Template
# ===============================================================================
# This file documents all variables needed to customize the secure pipeline.
# Copy this file and customize for your application.
# ===============================================================================

# ===============================================================================
# APPLICATION CONFIGURATION
# ===============================================================================
# Basic application settings that identify your app and its deployment

APP_NAME=myapp                              # Application name (lowercase, no spaces, used for container names)
APP_DOMAIN=myapp.example.com                # Public domain for the application
DEPLOY_PORT=4000                            # Port the application listens on inside the container
APP_USER=appuser                            # Non-root user to run the application (for security)

# ===============================================================================
# REGISTRY CONFIGURATION
# ===============================================================================
# Container registry settings for storing and retrieving images

CI_REGISTRY=gitlab.example.com:5050         # GitLab container registry URL (with port if needed)
CI_REGISTRY_IMAGE=gitlab.example.com:5050/group/project  # Full path to your project's container registry

# ===============================================================================
# DEPLOYMENT CONFIGURATION
# ===============================================================================
# Settings for deploying to your target environment

DEPLOY_HOST=192.168.0.100                   # IP or hostname of deployment target
DEPLOY_USER=deployer                        # SSH user for deployment (should have docker permissions)
DEPLOY_PATH=/srv/myapp                      # Deployment directory on target host
DATA_PATH=/srv/myapp/data                   # Persistent data storage path on host

# ===============================================================================
# VERSION MANAGEMENT
# ===============================================================================
# Version tracking configuration

VERSION_FILE=VERSION                        # File containing version number (e.g., "1.0.0")

# ===============================================================================
# APPLICATION RUNTIME
# ===============================================================================
# Python/Flask application configuration

FLASK_APP=app.py                           # Main Flask application file
WSGI_MODULE=wsgi:application               # WSGI module for Gunicorn (module:callable)
WORKERS=1                                  # Number of Gunicorn worker processes

# ===============================================================================
# SECURITY CONFIGURATION (GitLab CI/CD Variables)
# ===============================================================================
# These should be set as GitLab CI/CD variables (Settings > CI/CD > Variables)
# DO NOT commit these values to your repository!

# LOCAL_CA_CERT                            # Base64-encoded custom CA certificate (optional)
#                                          # Use if your registry uses self-signed or internal CA
#                                          # Generate with: base64 -w 0 /path/to/ca.crt

# DEPLOY_SSH_KEY                           # SSH private key for deployment (required)
#                                          # Generate with: ssh-keygen -t ed25519 -C "gitlab-deploy"
#                                          # Store the entire private key contents as a File variable

# CI_REGISTRY_USER                         # GitLab registry username (auto-provided by GitLab)
# CI_REGISTRY_PASSWORD                     # GitLab registry password (auto-provided by GitLab)
# CI_JOB_TOKEN                             # GitLab job token for registry auth (auto-provided)

# ===============================================================================
# OPTIONAL ADVANCED FEATURES
# ===============================================================================
# Additional configuration for advanced security features

QUICK_DEPLOY=false                         # Set to "true" to skip lint, test, scan for fast testing
                                           # WARNING: Only use for development/testing!

# COSIGN_PRIVATE_KEY                       # Base64-encoded Cosign private key for image signing (optional)
#                                          # Generate with: cosign generate-key-pair
#                                          # Encode with: base64 -w 0 cosign.key

# ===============================================================================
# GITLAB RUNNER TAGS
# ===============================================================================
# Configure based on your GitLab runner setup
# Default assumes runners with "docker" tag that support Docker-in-Docker

# Required runner tags:
# - docker: For all Docker-based jobs (build, scan, deploy)

# ===============================================================================
# HEALTH CHECK CONFIGURATION
# ===============================================================================
# Endpoint for health checks (must be implemented in your application)

# The pipeline expects a /healthz or / endpoint that returns HTTP 200 when healthy
# Implement in your application or customize the health check commands in:
# - Dockerfile.template (HEALTHCHECK directive)
# - docker-compose.yml.template (healthcheck section)
# - gitlab-ci.yml.template (deploy stage health check)
